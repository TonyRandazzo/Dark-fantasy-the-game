[gd_scene load_steps=23 format=3 uid="uid://bqwpbmpd5vci8"]

[ext_resource type="Script" path="res://Scenes/Map/mappa.gd" id="1_w6hae"]
[ext_resource type="Texture2D" uid="uid://b4h5pcnn65saw" path="res://Sfondi/mappa.webp" id="2_0yblw"]
[ext_resource type="Texture2D" uid="uid://cnd60hv2vwmcb" path="res://UI/knight.png" id="3_1c8jt"]
[ext_resource type="Texture2D" uid="uid://bx5g2n2gtdrvo" path="res://UI/assasin.png" id="4_i7j81"]
[ext_resource type="Texture2D" uid="uid://b4qd1du082qw5" path="res://UI/elf.png" id="5_nijn3"]
[ext_resource type="Script" path="res://Scenes/Map/matrix.gd" id="6_yntih"]
[ext_resource type="Texture2D" uid="uid://mgow4rha6f16" path="res://UI/pause1.png" id="7_mdi01"]
[ext_resource type="PackedScene" uid="uid://c2e01wr4cqgth" path="res://Scenes/NodeTypes/dialogue.tscn" id="7_qis3b"]
[ext_resource type="Texture2D" uid="uid://domwjaixu0uie" path="res://UI/Pause.png" id="8_1f2ww"]
[ext_resource type="Texture2D" uid="uid://dbc7j6mxv1gb0" path="res://UI/cave.png" id="8_qn4qm"]
[ext_resource type="Texture2D" uid="uid://b8n8g1t8bmium" path="res://UI/RectangleBox_96x96.png" id="9_oh5ms"]
[ext_resource type="Texture2D" uid="uid://cny0ffti13vs5" path="res://UI/village.png" id="9_t3tfw"]
[ext_resource type="Texture2D" uid="uid://d16gwrtdwi1bi" path="res://UI/wood.png" id="10_wcg2m"]
[ext_resource type="Texture2D" uid="uid://br6qnyfcv56ku" path="res://UI/Button_52x14.png" id="10_woudf"]

[sub_resource type="GDScript" id="GDScript_0g7se"]
script/source = "extends Resource
class_name NodeData
#NodeData estende Resource, non è un nodo della scena (Node2D, Control, ecc.), ma tiene solo dati
#quindi non entra mai nell’albero della scena. 
#quindi non servono _ready() e _process() 

@export var tipo: String = \"\"  # \"citta\", \"foresta\", \"caverna\"
@export var cutscenes_possibili: Array[CutsceneData] = []
@export var icon: Texture2D  # proprietà per la texture
"

[sub_resource type="GDScript" id="GDScript_o5ifg"]
script/source = "extends Resource
class_name CutsceneData

@export var id: String
@export var tipo: String # \"dialogo\", \"fight\", ecc.
@export var scena: PackedScene
@export var lines: Array[String] = []
@export var choices: Array[String] = []
@export var narration: String = \"\"
@export var actions: Array[String] = []
"

[sub_resource type="Resource" id="Resource_uvso7"]
script = SubResource("GDScript_o5ifg")
id = "cutscene_caverna_1"
tipo = "Narrativo"
scena = ExtResource("7_qis3b")
lines = Array[String](["dfsdfd", "dssd", "sds"])
choices = Array[String](["caca", "pupu"])
narration = "Entri nella caverna buia...\", \"Senti un rumore sinistro"
actions = Array[String](["ca", "sss"])

[sub_resource type="Resource" id="Resource_rf8ik"]
script = SubResource("GDScript_0g7se")
tipo = "Caverna"
cutscenes_possibili = Array[SubResource("GDScript_o5ifg")]([SubResource("Resource_uvso7"), null, null])
icon = ExtResource("8_qn4qm")

[sub_resource type="Resource" id="Resource_q23g7"]
script = SubResource("GDScript_o5ifg")
id = "cutscene_città_1"
tipo = "Narrativo"
scena = ExtResource("7_qis3b")
lines = Array[String]([])
choices = Array[String]([])
narration = "SEI FORTEEEEE"
actions = Array[String]([])

[sub_resource type="Resource" id="Resource_flvow"]
script = SubResource("GDScript_0g7se")
tipo = "Città"
cutscenes_possibili = Array[SubResource("GDScript_o5ifg")]([SubResource("Resource_q23g7"), null, null, null])
icon = ExtResource("9_t3tfw")

[sub_resource type="Resource" id="Resource_xin76"]
script = SubResource("GDScript_o5ifg")
id = "cutscene_foresta_1"
tipo = "Narrativo"
scena = ExtResource("7_qis3b")
lines = Array[String]([])
choices = Array[String]([])
narration = "SEI FORTEEEEE"
actions = Array[String]([])

[sub_resource type="Resource" id="Resource_0xx7x"]
script = SubResource("GDScript_0g7se")
tipo = "Foresta"
cutscenes_possibili = Array[SubResource("GDScript_o5ifg")]([SubResource("Resource_xin76"), null, null, null])
icon = ExtResource("10_wcg2m")

[node name="Mappa" type="Node2D"]
script = ExtResource("1_w6hae")

[node name="Mappa" type="Sprite2D" parent="."]
scale = Vector2(1.79531, 2.54118)
texture = ExtResource("2_0yblw")
centered = false

[node name="Party" type="Node2D" parent="."]
position = Vector2(806, 570)

[node name="Player" type="Sprite2D" parent="Party"]
z_index = 1
scale = Vector2(0.15, 0.15)
texture = ExtResource("3_1c8jt")

[node name="Minion" type="Sprite2D" parent="Party"]
visible = false
scale = Vector2(0.13, 0.13)
texture = ExtResource("4_i7j81")

[node name="Minion2" type="Sprite2D" parent="Party"]
visible = false
scale = Vector2(0.13, 0.13)
texture = ExtResource("5_nijn3")

[node name="Matrix" type="Node2D" parent="."]
script = ExtResource("6_yntih")
node_data_types = Array[SubResource("GDScript_0g7se")]([SubResource("Resource_rf8ik"), SubResource("Resource_flvow"), SubResource("Resource_0xx7x")])
columns = 12
rows = 8

[node name="PauseButton" type="TextureButton" parent="."]
process_mode = 3
offset_left = 1046.0
offset_top = 30.0
offset_right = 1134.0
offset_bottom = 108.0
texture_normal = ExtResource("7_mdi01")
texture_pressed = ExtResource("8_1f2ww")
stretch_mode = 0

[node name="PauseScreen" type="CanvasLayer" parent="."]
process_mode = 3
visible = false

[node name="RectangleBox96x96" type="Sprite2D" parent="PauseScreen"]
process_mode = 3
position = Vector2(608.875, 338.5)
scale = Vector2(7.16927, 4.05208)
texture = ExtResource("9_oh5ms")

[node name="Continue" type="TextureButton" parent="PauseScreen"]
process_mode = 3
offset_left = 382.0
offset_top = 205.0
offset_right = 833.0
offset_bottom = 283.0
texture_normal = ExtResource("10_woudf")
texture_pressed = ExtResource("10_woudf")
texture_hover = ExtResource("10_woudf")
texture_disabled = ExtResource("10_woudf")
texture_focused = ExtResource("10_woudf")
stretch_mode = 0
metadata/_edit_use_anchors_ = true

[node name="Settings" type="TextureButton" parent="PauseScreen"]
process_mode = 3
offset_left = 382.0
offset_top = 307.0
offset_right = 833.0
offset_bottom = 385.0
texture_normal = ExtResource("10_woudf")
texture_pressed = ExtResource("10_woudf")
texture_hover = ExtResource("10_woudf")
texture_disabled = ExtResource("10_woudf")
texture_focused = ExtResource("10_woudf")
stretch_mode = 0
metadata/_edit_use_anchors_ = true

[node name="Quit" type="TextureButton" parent="PauseScreen"]
process_mode = 3
offset_left = 382.0
offset_top = 403.0
offset_right = 833.0
offset_bottom = 481.0
texture_normal = ExtResource("10_woudf")
texture_pressed = ExtResource("10_woudf")
texture_hover = ExtResource("10_woudf")
texture_disabled = ExtResource("10_woudf")
texture_focused = ExtResource("10_woudf")
stretch_mode = 0
metadata/_edit_use_anchors_ = true

[connection signal="pressed" from="PauseButton" to="." method="_on_pause_button_pressed"]
[connection signal="pressed" from="PauseScreen/Continue" to="." method="_on_continue_pressed"]
[connection signal="pressed" from="PauseScreen/Settings" to="." method="_on_settings_pressed"]
[connection signal="pressed" from="PauseScreen/Quit" to="." method="_on_quit_pressed"]
